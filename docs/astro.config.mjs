// =============================================================================
// Eigenvue Documentation Site — Astro + Starlight Configuration
//
// This configuration defines the entire structure of the docs site:
// - Site metadata (title, description, social links)
// - Sidebar navigation hierarchy
// - Custom CSS theming to match Eigenvue's brand
// - Search configuration (Pagefind, built-in)
// - Social/Open Graph metadata
//
// ARCHITECTURE NOTES:
// - The sidebar structure mirrors the docs/src/content/docs/ directory layout.
// - Algorithm reference pages are auto-generated by scripts/generate-algorithm-docs.py
//   from algorithms/*/meta.json files. They are checked into version control and
//   regenerated as part of the build process. The sidebar lists them under
//   "Algorithm Reference" with category-based grouping.
// - The deploy-web.yml workflow builds this site and merges the output into
//   the web app's static build for unified Firebase Hosting deployment.
// =============================================================================

import { defineConfig } from "astro/config";
import starlight from "@astrojs/starlight";

export default defineConfig({
  // ---------------------------------------------------------------------------
  // Site-Level Configuration
  // ---------------------------------------------------------------------------
  site: "https://eigenvue.web.app",
  base: "/docs",

  integrations: [
    starlight({
      // -----------------------------------------------------------------------
      // Site Metadata
      // -----------------------------------------------------------------------
      title: "Eigenvue Docs",
      description:
        "Documentation for Eigenvue — the visual learning platform for algorithms, AI architectures, and quantum computing.",

      // Social links displayed in the site header.
      social: [
        {
          icon: "github",
          label: "GitHub",
          href: "https://github.com/ashutoshm1771/eigenvue",
        },
      ],

      // Use the same favicon as the main web app.
      favicon: "/favicon.ico",

      // -----------------------------------------------------------------------
      // Custom CSS — brand colors, typography overrides
      // -----------------------------------------------------------------------
      customCss: ["./src/styles/custom.css"],

      // -----------------------------------------------------------------------
      // Default metadata for Open Graph / social sharing
      // -----------------------------------------------------------------------
      head: [
        {
          tag: "meta",
          attrs: {
            property: "og:image",
            content: "https://eigenvue.web.app/docs/og-docs.png",
          },
        },
        {
          tag: "meta",
          attrs: {
            property: "og:site_name",
            content: "Eigenvue Documentation",
          },
        },
      ],

      // -----------------------------------------------------------------------
      // Sidebar Navigation
      // -----------------------------------------------------------------------
      sidebar: [
        {
          label: "← Back to Eigenvue",
          link: "https://eigenvue.web.app",
        },
        {
          label: "Getting Started",
          items: [
            { label: "Web Application", slug: "getting-started/web-app" },
            {
              label: "Python Package",
              slug: "getting-started/python-package",
            },
            {
              label: "Jupyter Integration",
              slug: "getting-started/jupyter",
            },
          ],
        },
        {
          label: "User Guide",
          items: [
            {
              label: "UI Controls & Playback",
              slug: "user-guide/ui-controls",
            },
            {
              label: "Sharing & URLs",
              slug: "user-guide/sharing-and-urls",
            },
            { label: "FAQ", slug: "user-guide/faq" },
          ],
        },
        {
          label: "Contributing",
          items: [
            {
              label: "Development Setup",
              slug: "contributing/development-setup",
            },
            {
              label: "Adding an Algorithm",
              slug: "contributing/adding-an-algorithm",
            },
            {
              label: "The Generator API",
              slug: "contributing/generator-api",
            },
            {
              label: "Adding a Layout",
              slug: "contributing/adding-a-layout",
            },
            { label: "Writing Tests", slug: "contributing/writing-tests" },
            { label: "Code Style Guide", slug: "contributing/code-style" },
            {
              label: "Cross-Language Parity",
              slug: "contributing/cross-language-parity",
            },
          ],
        },
        {
          label: "API Reference",
          items: [
            {
              label: "Python Public API",
              slug: "api-reference/python-api",
            },
            {
              label: "TypeScript Generator API",
              slug: "api-reference/typescript-generator-api",
            },
            {
              label: "Step Format Specification",
              slug: "api-reference/step-format",
            },
            {
              label: "Visual Action Types",
              slug: "api-reference/visual-actions",
            },
            {
              label: "meta.json Schema",
              slug: "api-reference/meta-json-schema",
            },
            { label: "Layout System", slug: "api-reference/layout-system" },
          ],
        },
        {
          label: "Architecture",
          items: [
            { label: "Overview", slug: "architecture/overview" },
            {
              label: "Design Decisions",
              slug: "architecture/design-decisions",
            },
            {
              label: "Rendering Engine",
              slug: "architecture/rendering-engine",
            },
          ],
        },
        {
          label: "Algorithm Reference",
          items: [
            { label: "All Algorithms", slug: "algorithms" },
            {
              label: "Classical",
              collapsed: true,
              items: [
                {
                  label: "Binary Search",
                  slug: "algorithms/binary-search",
                },
                { label: "Bubble Sort", slug: "algorithms/bubble-sort" },
                { label: "QuickSort", slug: "algorithms/quicksort" },
                { label: "Merge Sort", slug: "algorithms/merge-sort" },
                {
                  label: "Breadth-First Search",
                  slug: "algorithms/bfs",
                },
                { label: "Depth-First Search", slug: "algorithms/dfs" },
                {
                  label: "Dijkstra's Algorithm",
                  slug: "algorithms/dijkstra",
                },
              ],
            },
            {
              label: "Deep Learning",
              collapsed: true,
              items: [
                { label: "Perceptron", slug: "algorithms/perceptron" },
                {
                  label: "Feedforward Network",
                  slug: "algorithms/feedforward-network",
                },
                {
                  label: "Backpropagation",
                  slug: "algorithms/backpropagation",
                },
                { label: "Convolution", slug: "algorithms/convolution" },
                {
                  label: "Gradient Descent",
                  slug: "algorithms/gradient-descent",
                },
              ],
            },
            {
              label: "Generative AI",
              collapsed: true,
              items: [
                {
                  label: "Tokenization (BPE)",
                  slug: "algorithms/tokenization-bpe",
                },
                {
                  label: "Token Embeddings",
                  slug: "algorithms/token-embeddings",
                },
                {
                  label: "Self-Attention",
                  slug: "algorithms/self-attention",
                },
                {
                  label: "Multi-Head Attention",
                  slug: "algorithms/multi-head-attention",
                },
                {
                  label: "Transformer Block",
                  slug: "algorithms/transformer-block",
                },
              ],
            },
          ],
        },
        {
          label: "Research & Citation",
          items: [
            {
              label: "Project Overview",
              slug: "research/project-overview",
            },
            {
              label: "Comparison with Existing Tools",
              slug: "research/comparison",
            },
            { label: "Citation", slug: "research/citation" },
          ],
        },
      ],
    }),
  ],
});
